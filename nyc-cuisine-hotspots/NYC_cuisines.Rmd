---
title: "NYC Cuisine Hotspots"
author: "Evan Powell"
date: "2025-08-08"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
# Load packages
library(tidyverse)
library(janitor)
library(sf)
library(dbscan)
library(tmap)
library(leaflet)
library(tidycensus)
library(tigris)
library(skimr)
library(RSocrata)

```

```{r reading nyc data}
#read data from NYC Open Data
restaurants <- read.socrata(
  "https://data.cityofnewyork.us/resource/43nn-pn8j.json",
  app_token = Sys.getenv("SOCRATA_APP_TOKEN"),
  email     = Sys.getenv("SOCRATA_EMAIL"),
  password  = Sys.getenv("SOCRATA_PASSWORD")
)
```

``` {r local save}
saveRDS(restaurants, "restaurants.rds")

```
```{r local retrieve}
restaurants <- readRDS("restaurants.rds")
```

```{r clean data}
#Remove columns we don't need
restaurants <- restaurants %>%
  select(camis, dba, cuisine_description, latitude, longitude)

#Make numeric the Lat / Long.
restaurants <- restaurants %>%
  mutate(
    latitude = as.numeric(latitude),
    longitude = as.numeric(longitude)
  )

#drop rows without Lat / Long. or cuisine description
restaurants <- restaurants %>%
  filter(
    !is.na(latitude),
    !is.na(longitude),
    !is.na(cuisine_description)
  )

#deduplicate
restaurants_unique <- restaurants %>%
  distinct(camis, .keep_all = TRUE)
```

```{r listing cuisines}
list_cuisines <- function(data) {
  data %>%
    group_by(cuisine_description) %>%
    summarise(n = n(), .groups = "drop") %>%
    arrange(desc(n))
}

cuisine_counts <- list_cuisines(restaurants_unique)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
